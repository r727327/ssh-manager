<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SSH Manager</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@xterm/xterm@5.5.0/css/xterm.css">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/@xterm/xterm@5.5.0/lib/xterm.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@xterm/addon-fit@0.10.0/lib/addon-fit.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.36.1/min/vs/loader.min.js"></script>
</head>

<body>
  <div class="title-bar">
    <div class="title-drag-region"></div>
    <div class="app-title">
      <i class="fas fa-terminal"></i> SSH Manager
    </div>
    <div class="window-controls">
      <button id="minBtn" class="window-btn min"><i class="fas fa-minus"></i></button>
      <button id="maxBtn" class="window-btn max"><i class="fas fa-square"></i></button>
      <button id="closeBtn" class="window-btn close"><i class="fas fa-times"></i></button>
    </div>
  </div>

  <div class="main-body">
    <div class="app-container">
      <!-- Sidebar -->
      <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <div class="sidebar-title">
            <h1>SERVERS</h1>
            <button id="toggleSidebarBtn" class="toggle-btn"><i class="fas fa-bars"></i></button>
          </div>
          <button id="addServerBtn" class="btn-primary">
            <i class="fas fa-plus"></i> <span>Add Server</span>
          </button>
        </div>

        <div class="server-list" id="serverList">
          <!-- Server items will be dynamically added here -->
        </div>
      </div>

      <!-- Main Content Area -->
      <div class="main-content">
        <div class="terminal-header">
          <div class="connection-info" id="connectionInfo">
            <span class="status-dot disconnected"></span>
            <span id="connectionText">Not Connected</span>
          </div>

          <!-- Tabs -->
          <div class="tabs" id="mainTabs" style="display: none;">
            <button class="tab-btn active" data-tab="terminal">
              <i class="fas fa-terminal"></i> Terminal
            </button>
            <button class="tab-btn" data-tab="files">
              <i class="fas fa-folder"></i> Files
            </button>
          </div>

          <button id="disconnectBtn" class="btn-disconnect" style="display: none;">
            <i class="fas fa-plug"></i> Disconnect
          </button>
        </div>

        <!-- Terminal View -->
        <div id="terminalView" class="view-container active">
          <div id="terminal" class="terminal-container"></div>
          <div class="terminal-input-area">
            <input type="text" id="commandInput" placeholder="Type command and press Enter..." disabled>
          </div>
        </div>

        <!-- File Explorer View (Dual Pane) -->
        <div id="filesView" class="view-container dual-pane" style="display: none;">

          <!-- Remote Files (Left) -->
          <div class="file-panel" id="remoteFilePanel">
            <div class="panel-header">Remote Files</div>
            <div class="file-explorer-toolbar">
              <div class="breadcrumbs" id="breadcrumbs" style="display:none;"></div>
              <input type="text" id="remotePathInput" class="path-input" placeholder="/remote/path">
              <input type="text" id="remoteSearchInput" class="search-input" placeholder="Search...">
              <div class="file-actions">
                <button id="refreshFilesBtn" title="Refresh"><i class="fas fa-sync-alt"></i></button>
                <button id="createFolderBtn" title="New Folder"><i class="fas fa-folder-plus"></i></button>
                <button id="createFileBtn" title="New File"><i class="fas fa-plus"></i></button>
              </div>
            </div>
            <div class="file-list-header">
              <div class="col-name">Name</div>
              <div class="col-size">Size</div>
              <div class="col-date">Modified</div>
            </div>
            <div class="file-list" id="fileList"></div>
          </div>

          <!-- Local Files (Right) -->
          <div class="file-panel" id="localFilePanel">
            <div class="panel-header">Local Files</div>
            <div class="file-explorer-toolbar">
              <div class="breadcrumbs" id="localBreadcrumbs" style="display:none;"></div>
              <input type="text" id="localPathInput" class="path-input" placeholder="/local/path">
              <input type="text" id="localSearchInput" class="search-input" placeholder="Search...">
              <div class="file-actions">
                <button id="refreshLocalFilesBtn" title="Refresh"><i class="fas fa-sync-alt"></i></button>
                <button id="uploadBtn" title="Upload to Remote"><i class="fas fa-arrow-left"></i> Upload</button>
              </div>
            </div>
            <div class="file-list-header">
              <div class="col-name">Name</div>
              <div class="col-size">Size</div>
              <div class="col-date">Modified</div>
            </div>
            <div class="file-list" id="localFileList"></div>
          </div>

        </div>

        <!-- Editor Container (Overlay) -->
        <div id="editorContainer" class="editor-overlay" style="display: none;">
          <div class="editor-header">
            <div class="editor-title">
              <i class="fas fa-file-code"></i> <span id="editorFileName">filename.txt</span>
            </div>
            <div class="editor-actions">
              <button id="saveFileBtn" class="btn-primary small"><i class="fas fa-save"></i> Save</button>
              <button id="closeEditorBtn" class="btn-secondary small"><i class="fas fa-times"></i> Close</button>
            </div>
          </div>
          <div id="monacoEditor" class="monaco-container"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Context Menu -->
  <div id="contextMenu" class="context-menu">
    <div class="menu-item" id="ctxEdit"><i class="fas fa-edit"></i> Edit</div>
    <div class="menu-item" id="ctxRename"><i class="fas fa-i-cursor"></i> Rename</div>
    <div class="menu-item" id="ctxDownload"><i class="fas fa-download"></i> Download</div>
    <div class="menu-item" id="ctxUpload"><i class="fas fa-upload"></i> Upload</div>
    <div class="menu-item" id="ctxDelete" class="danger"><i class="fas fa-trash"></i> Delete</div>
  </div>

  <!-- Modal for Add/Edit Server -->
  <div id="serverModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modalTitle">Add Server</h2>
        <button class="modal-close" id="closeModal">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <form id="serverForm">
        <div class="form-group">
          <label for="serverName">Server Name</label>
          <input type="text" id="serverName" required placeholder="My Server">
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="serverHost">Host</label>
            <input type="text" id="serverHost" required placeholder="192.168.1.100">
          </div>

          <div class="form-group">
            <label for="serverPort">Port</label>
            <input type="number" id="serverPort" value="22" required>
          </div>
        </div>

        <div class="form-group">
          <label for="serverUsername">Username</label>
          <input type="text" id="serverUsername" required placeholder="root">
        </div>

        <div class="form-group">
          <label for="authType">Authentication Type</label>
          <select id="authType">
            <option value="password">Password</option>
            <option value="key">SSH Key</option>
          </select>
        </div>

        <div class="form-group" id="passwordGroup">
          <label for="serverPassword">Password</label>
          <input type="password" id="serverPassword" placeholder="Enter password">
        </div>

        <div class="form-group" id="keyGroup" style="display: none;">
          <label for="serverPrivateKey">Private Key Path</label>
          <input type="text" id="serverPrivateKey" placeholder="/home/user/.ssh/id_rsa">
        </div>

        <div class="form-group" id="passphraseGroup" style="display: none;">
          <label for="serverPassphrase">Passphrase (optional)</label>
          <input type="password" id="serverPassphrase" placeholder="Enter passphrase if key is encrypted">
        </div>

        <div class="modal-actions">
          <button type="button" class="btn-secondary" id="cancelBtn">Cancel</button>
          <button type="submit" class="btn-primary">
            <i class="fas fa-save"></i> Save
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Rename Modal -->
  <div id="renameModal" class="modal">
    <div class="modal-content small-modal">
      <div class="modal-header">
        <h2>Rename Item</h2>
        <button class="modal-close" id="closeRenameModal"><i class="fas fa-times"></i></button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="newNameInput">New Name</label>
          <input type="text" id="newNameInput" class="full-width">
        </div>
      </div>
      <div class="modal-actions">
        <button class="btn-secondary" id="cancelRenameBtn">Cancel</button>
        <button class="btn-primary" id="confirmRenameBtn">Rename</button>
      </div>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div id="deleteConfirmModal" class="modal">
    <div class="modal-content small-modal">
      <div class="modal-header">
        <h2>Confirm Delete</h2>
        <button class="modal-close" id="closeDeleteModal"><i class="fas fa-times"></i></button>
      </div>
      <div class="modal-body">
        <p id="deleteConfirmMsg">Are you sure you want to delete this item?</p>
        <p class="warning-text"><i class="fas fa-exclamation-triangle"></i> This action cannot be undone.</p>
      </div>
      <div class="modal-actions">
        <button class="btn-secondary" id="cancelDeleteBtn">Cancel</button>
        <button class="btn-danger" id="confirmDeleteBtn">Delete</button>
      </div>
    </div>
  </div>

  <!-- Prompt Modal -->
  <div id="promptModal" class="modal">
    <div class="modal-content small-modal">
      <div class="modal-header">
        <h2 id="promptTitle">Input</h2>
        <button class="modal-close" id="closePromptModal"><i class="fas fa-times"></i></button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label id="promptMessage" for="promptInput">Enter value</label>
          <input type="text" id="promptInput" class="full-width">
        </div>
      </div>
      <div class="modal-actions">
        <button class="btn-secondary" id="cancelPromptBtn">Cancel</button>
        <button class="btn-primary" id="confirmPromptBtn">OK</button>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>

</html>